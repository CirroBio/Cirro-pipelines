{
  "form": {
    "type": "object",
    "properties": {
      "input_tiff": {
        "title": "Select Image",
        "type": "string",
        "pathType": "dataset",
        "file": "**/*",
        "description": "Image in TIFF format used as input for Cellpose segmentation."
      },
      "cellpose_options": {
        "type": "object",
        "title": "Cellpose Options",
        "properties": {
          "pretrained_model": {
            "type": "string",
            "title": "Pretrained Model",
            "default": "cyto3",
            "enum": [
              "cyto3",
              "cyto2",
              "cyto",
              "nuclei",
              "tissuenet_cp3",
              "livecell_cp3",
              "yeast_PhC_cp3",
              "yeast_BF_cp3",
              "bact_phase_cp3",
              "bact_fluor_cp3",
              "deepbacs_cp3",
              "cyto2_cp3"
            ]
          },
          "channel_axis": {
            "type": "integer",
            "title": "Channel Axis",
            "description": "Axis of image with color channels (e.g. 0 if image is (C, X, Y))",
            "default": 0
          },
          "segment_channel": {
            "type": "integer",
            "title": "Channel to Segment",
            "default": 0
          },
          "nuclear_channel": {
            "type": "integer",
            "title": "Nuclear Channel",
            "description": "Channel to segment nuclei (optional for cyto models)"
          },
          "diameter": {
            "type": "number",
            "title": "Cell Diameter",
            "description": "If 0, will use the diameter of the training labels used in the model, or with built-in model will estimate diameter for each image",
            "default": 0
          },
          "flow_threshold": {
            "type": "number",
            "title": "Flow Error Threshold",
            "description": "0 turns off this optional QC step, higher values will remove more cells",
            "default": 0.4
          },
          "cellprob_threshold": {
            "type": "number",
            "title": "Cell Probability Threshold",
            "description": "Decrease to find more and larger masks",
            "default": 0
          },
          "z_axis": {
            "type": "integer",
            "title": "Z Axis",
            "description": "Axis of image which corresponds to Z dimension (optional)"
          },
          "anisotropy": {
            "type": "number",
            "title": "Anisotropy",
            "description": "Anisotropy of volume in 3D",
            "default": 1.0
          },
          "no_resample": {
            "type": "boolean",
            "description": "No Resample",
            "title": "Disable dynamics on full image (makes algorithm faster for images with large diameters)",
            "default": false
          },
          "exclude_on_edges": {
            "type": "boolean",
            "description": "Exclude on Edges",
            "title": "Discard masks which touch edges of image",
            "default": false
          }
        }
      },
      "dashboard_options": {
        "type": "object",
        "title": "Dashboard Options",
        "properties": {
          "build_dashboard": {
            "type": "boolean",
            "title": "Build Dashboard",
            "default": true
          }
        },
        "dependencies": {
          "build_dashboard": {
            "properties": {
              "cluster_by": {
                "type": "string",
                "title": "Cluster By",
                "description": "Select the measurement used to cluster cells",
                "default": "Cell.Mean",
                "enum": [
                  "Cell.Mean",
                  "Cell.Median"
                ]
              },
              "cluster_resolution": {
                "type": "number",
                "title": "Cluster Resolution",
                "description": "Resolution for clustering cells",
                "default": 1.0
              },
              "scaling": {
                "type": "string",
                "title": "Scaling Method",
                "description": "Transformation method for scaling data (robust: median +/- interquartile range, zscore: mean +/- standard deviation, minmax: min-max normalization, none: no scaling)",
                "default": "robust",
                "enum": ["robust", "zscore", "minmax", "none"]
              },
              "clip_lower": {
                "type": "number",
                "title": "Clip Lower",
                "description": "Lower bound for clipping data",
                "default": -2.0
              },
              "clip_upper": {
                "type": "number",
                "title": "Clip Upper",
                "description": "Upper bound for clipping data",
                "default": 2.0
              }
            }
          }
        }
      }
    }
  },
  "ui": {}
}
